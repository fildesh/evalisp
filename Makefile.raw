
default: all

CC = gcc

CONFIG += ansi
CONFIG += debug

CxPath = ../cx
BinPath = ../bin
BldPath = eva

ExeList = eva pipelisp
ExeList := $(addprefix $(BinPath)/,$(ExeList))
Objs = $(addprefix $(BldPath)/,$(addsuffix .o,$(Deps)) sxpn.o)

include $(CxPath)/include.mk

all: $(ExeList)

$(BldPath)/sxpn.o: $(BldPath)/sxpn.c $(BldPath)/sxpn.h
$(BldPath)/eva.o: $(BldPath)/sxpn.h

$(call binexe,eva): $(BldPath)/eva.o \
	$(BldPath)/sxpn.o \
	$(CxStdObjs) $(addprefix $(CxBldPath)/,rbtree.o bstree.o)
	$(CC) $(CFLAGS) -o $@ $^

$(call binexe,pipelisp): $(BldPath)/pipelisp.o $(CxStdObjs)
	$(CC) $(CFLAGS) -o $@ $^

.PHONY: clean
clean:
	rm -fr $(PfxBldPath)
	rm -f $(ExeList)

